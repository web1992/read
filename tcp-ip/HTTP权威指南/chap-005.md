# 第5章 Web 服务器

- 基本 Web 服务器请求的步骤
- 虚拟托管的docroot
- 目录列表
- Options -Indexes
- Content-Type 首部
- Content-Length 首部
- MIME 类型（mime.types）
- Location 响应首部包含了内容的新地址或优选地址的 URI
- 永久搬离的资源 状态码 301 Moved Permanently 就用于此类重定向
- 临时搬离的资源
- URL 增强
- 负载均衡
- 服务器关联
- 规范目录名称
- 代理与网关的对比
- 代理做协议的转发 http -> http
- 网关做协议的转发+转化 Http -> POP
- 反向代理
- 内容路由器

## 基本 Web 服务器请求的步骤

- 1. 建立连接——接受一个客户端连接，或者如果不希望与这个客户端建立连接，就将其关闭。
- 2. 接收请求——从网络中读取一条 HTTP 请求报文。
- 3. 处理请求——对请求报文进行解释，并采取行动。
- 4. 访问资源——访问报文中指定的资源。
- 5. 构建响应——创建带有正确首部的 HTTP 响应报文。
- 6. 发送响应——将响应回送给客户端。
- 7. 记录事务处理过程——将与已完成事务有关的内容记录在一个日志文件中



## 反向代理

代理可以假扮 Web 服务器。这些被称为替代物（surrogate）或反向代理（reverse proxy）的代理接收发给 Web 服务器的真实请求，但与 Web 服务器不同的是，它们可以发起与其他服务器的通信，以便按需定位所请求的内容。